{% extends 'base.html.twig' %}

{% block title %}Text index
{% endblock %}

{% block body %}
	<section class="uk-section uk-section-small">
		<div class="uk-container">

			<h1 class="uk-heading-line uk-text-center">
				<span>Texts</span>
			</h1>

			{# Masonry grid avec UIKit #}
			<div class="uk-child-width-1-3@s uk-child-width-1-2@m uk-grid-small uk-grid-match" uk-grid uk-scrollspy="cls: uk-animation-fade; target: > div; delay: 150;">
				{% for text in texts %}
					<div>
						<a href="{{ path('app_text_show', {'id': text.id}) }}" class="uk-link-reset">
							<div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-box-shadow-hover-medium uk-transition-toggle">

								<h3 class="uk-card-title uk-text-center">{{ text.title }}</h3>

								<p class="uk-text-small uk-text-center uk-margin-remove-top">
									{% set words = text.content|striptags|split(' ') %}
									{{ words|slice(0,30)|join(' ') }}
									{% if words|length > 30 %}...
									{% endif %}
								</p>

							</div>
						</a>
					</div>
				{% else %}
					<div class="uk-width-1-1">
						<p class="uk-text-center">Ajoute tes textes mon lapin !</p>
					</div>
				{% endfor %}
			</div>

				<div class="uk-text-center uk-margin-top" uk-scrollspy="cls: uk-animation-fade; delay: 300">
			<a href="{{ path('app_home') }}" class="uk-button uk-button-default uk-border-pill">‚Üê Back to Home</a>

			{% if is_granted('ROLE_ADMIN') %}
				<a href="{{ path('app_text_new') }}" class="mobile-margin-btn uk-button uk-button-primary uk-border-pill uk-margin-left">
					Ajouter un texte
				</a>
			{% endif %}
		</div>

		</div>
	</section>
{% endblock %}
